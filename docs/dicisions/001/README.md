Доработка трекера задач Jira
=========
|          |                                                                   |
|----------|-------------------------------------------------------------------|
|Status:   | proposed                                                          |
|Deciders: | dev, devops                                                       |
|Date:     | 19.04.2023                                                        |


# Кейс

Elopent - подрядчик крупной компании ANI, оказывающий ей услуги по разработке и
поддержке информационных систем. 
- Учет объёмов выполненных работ ведётся согласно поставленным задачам в трекере 
    задач Jira.
- Персонал, работающий в Elopent в своей массе работает удалённо и для 
    использования Jira входит через VPN в локальную сеть компании ANI. 
- У каждого сотрудника Elopent есть личная учетная запись к VPN для доступа в
    локальную сеть ANI.
- Jira работает только из под VPN 
- Jira представляет из себя web-приложение, состоящее из frontend части в
    браузере (html+js+css) и backend-части в виде REST-API приложения (java)

У данного процесса работы есть следующие особенности:

- Ввиду того что Jira компании ANI перегружена плагинами объём frontend-части
    составляет десятки мегабайт, которые грузятся при каждом открытии страницы
- VPN работает медленно и нестабильно, из за чего ссылка Jira-задачу может
    загружаться до 3 минут
- Компания ANI не планирует ни оптимизировать работу Jira ни работу VPN ни
    держать Jira в открытом доступе.
- У компании ANI нет никаких проблем со временем загрузки страниц Jira, так как
    для их сотрудников VPN работает на порядок эффективнее и не даёт задержек
- backend-часть Jira имеет приемлемое время ответа даже через VPN (ввиду 
    небольшого объёма передаваемых данных) порядка 1 секунды.

Из за этого у сотрудников компании Elopent, особенно у тех, кто использует Jira
как основной инструмент, использование рабочего времени становится
неэффективным. Количество задач, проходящих через их руки исчисляется десятками,
а то и сотнями в день и время ожидания ответа от jira достигает половины от
рабочего.

# Бизнес-цели

Разработать систему доступа для сотрудников компании Elopent в Jira компании 
ANI, позволяющую снизить временные издержки на использование этого трекера 
задач.

# Бизнес-драйверы

- текущий web-интерфейс jira тормозит
- функционал web-интерфейса Jira избыточен для ежедневной эксплуатации
- изменить текущую конфигурацию доступа к Jira не представляется возможным. 

# Стейкхолдеры и их потребности

Заинтересованные стороны, ключевые участники:

- Линейные сотрудники компании Elopent - эти люди просматривают список своих
    задач, переводят в статусы согласно workflow, оставляют комментарии в
    задачах. Фиксируют собственные трудозатраты.
- Релиз-менеджер - формирует еженедельные релизы, определяет какие из задач
    будут выведены в какие релизы. Производит деплой на продуктовый контур.
- Тимлид - Распределяет задачи между линейными сотрудниками. Занимается ревью 
    кода, принимает решение о готовности задачи к тестированию. Производит 
    деплой кода задачи на тестовом контуре. Производит предварительную оценку
    трудозатрат.
- (Lead)QA - производит проверку соответствия резальтата выполнения задачи на
    соответствие описанию и требованиям. Проверяет на отсутствие ошибок как на
    тестовом так и на продуктовом контуре.
- Репортеры - люди создающие задачи с описаниями. 

# Пользовательские истории

UC-1: Постановка задачи
- репортер ставит задачу в общем виде с заполнением минимального необходимого
    количества полей
    + Название задачи
    + Исполнитель (как правило тимлид)
    + Краткое описание

UC-2: Распределение задач
- тимлид просматривает свой канбан с задачами на предмет наличия задач в статусе
    "todo"
- тимлид назначает сполнителем одного из сотрудников своей команды

UC-2: Ревью кода задач
- тимлид просмотривает свой канбан с задачами на предмет наличия задач в статусе
    "review"
- тимлид просматривает diff для merge request (имена веток по воркфлоу связаны
    по названию с номерами задач)
- тимлид оставляет комментарий в задаче по поводу кода
- если решение не устраивает тимлид меняет статус задачи на Reopen и назначает
    исполнителя на исправление.
- если решение устраивает тимлид запускает сценарий UC-3

UC-3: Деплой кода на тестовом контуре и передача в QA
- тимлид делает merge ветки задачи в ветку develop. При этом автоматически
    запускается CI/CD сценарий, которые деплоит код на тестовый контур
- тимлид изменяет статус задачи на QA и назначает исполнителем Lead QA



UC-1: Пользовательское обслуживание:
- администратор ведет внутренние учетные записи пользователей (клиентов)
- администратор поддерживает экспертный набор навыков, местоположение и 
    доступность

UC-2: Регистрация клиента:
- клиенты регистрируют свой профиль, кредитную карту и план поддержки

UC-3: Воркфлоу заявки:
- клиенты создают заявки на обслуживание через Интернет
- клиенты создают заявки на обслуживание по звонку с помощью техподдержки
- эксперты используют мобильное приложение для чтения заявки и изменения статуса 
    аявки
- эксперты могут осуществлять поиск в базе знаний через мобильное приложение

UC-4: Отправка опроса удовлетворенности:
- клиенты заполняют и отправляют опросы удовлетворенности

# Атрибуты качества

- сервисы и базы знаний, ориентированные на клиентов, должны быть высокодоступными,
    поскольку перебои в работе отрицательно скажутся на бизнесе
- время отклика < 2 с при загрузке страницы
- время поиска в базе знаний несколько секунд
- формирование отчетов не должно занимать чрезмерно много времени
- не должно быть утерянных тикетов
- личная информация клиентов и кредитные карты должны храниться в безопасности и
    соответствовать требованиям PCI

# Контекстная схема системы

![context](context.png)

# Текущая архитектура

![architect](architect.png)

# Критические сценарии

- клиенты создают заявки на обслуживание через Интернет
- клиенты создают заявки на обслуживание по звонку с помощью техподдержки
- эксперты используют мобильное приложение для чтения заявки и изменения статуса
    заявки
- эксперты могут осуществлять поиск в базе знаний через мобильное приложение

# Критические характеристики

- доступность сервисов и базы знаний доля ошибочных ответов от сервиса и базы 
    знаний (можно ориентироваться на 99.9%)
- время ответа сервиса и базы знаний
    + 95% квантелиь времени ответа сервисов для клиента (не должно превышать 3с)
    + 95% квантиель времени ответа поиска в базе знаний (не более 5с)
- надежность: доля утерянных тикетов (не должно быть вообще)
- время разработки (time to market)
- стоимость разработки (budget/cost)

# Архитектурные решения

## Архитектурное решение 1
## Архитектурное решение 2
## Архитектурное решение 3

# Сравнение архитектурных решений

## Удовлетворение базовых сценариев

| Пользовательский сценарий                      |Решение 1|Решение 2|Решение 3|
|------------------------------------------------|---------|---------|---------|
| UC1: заголовок сценария 1                      |    0    |    +    |   ++    |
| UC2: заголовок сценария 2                      |    -    |    0    |   +     |
| UC3: заголовок сценария 3                      |    +    |    --   |    0    |

- *--* - много хуже текущего положения вещей
- *-* - хуже текущего положения вещей
- *0* - на уровне текущего положения вещей
- *+* - лучше текущего положения вещей
- *++* - намного лучше текущего положения вещей

## Удовлетворение критических сценариев

| Пользовательский сценарий                      |Решение 1|Решение 2|Решение 3|
|------------------------------------------------|---------|---------|---------|
| CC1: заголовок критического сценария 1         |    0    |    +    |   ++    |
| CC2: заголовок критического сценария 2         |    -    |    0    |   +     |
| CC3: заголовок критического сценария 3         |    +    |    --   |    0    |

- *--* - много хуже текущего положения вещей
- *-* - хуже текущего положения вещей
- *0* - на уровне текущего положения вещей
- *+* - лучше текущего положения вещей
- *++* - намного лучше текущего положения вещей

## Удовлетворение атрибутов качества

| Атрибуты качества                              |Решение 1|Решение 2|Решение 3|
|------------------------------------------------|---------|---------|---------|
| Атрибут качества 1                             |    0    |    +    |   ++    |
| Атрибут качества 2                             |    -    |    0    |   +     |
| Aтрибут качества 3                             |    +    |    --   |    0    |

- *--* - много хуже                           
- *-* - хуже                          
- *0* - на том же уровне                  
- *+* - лучше                         
- *++* - намного лучше                         

## Удовлетворение критических характеристик

| Критические характеристики                     |Решение 1|Решение 2|Решение 3|
|------------------------------------------------|---------|---------|---------|
| Критическая характеристика 1                   |    0    |    +    |   ++    |
| Критическая характеристика 2                   |    -    |    0    |   +     |
| Критическая характеристика 3                   |    +    |    --   |    0    |

- *--* - много хуже                           
- *-* - хуже                          
- *0* - на том же уровне                  
- *+* - лучше                         
- *++* - намного лучше                         


# Риски архитектурных решений

## Риски архитектурного решения 1
## Риски архитектурного решения 2
## Риски архитектурного решения 3

# Окончательное архитектурное решение
